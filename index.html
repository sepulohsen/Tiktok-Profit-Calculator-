<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Calculator GMV TikTok (v3)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f9ff;
      padding: 20px;
      color: #003366;
    }

    h2 {
      color: #003366;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }

    th, td {
      padding: 8px;
      border: 1px solid #99c2ff;
      text-align: left;
    }

    th {
      background-color: #cce0ff;
    }

    input[type="text"], input[type="number"] {
      width: 90%;
      padding: 5px;
      border: 1px solid #99c2ff;
      border-radius: 4px;
    }

    .section {
      margin-top: 30px;
    }

    .result-box {
      background-color: #e6f2ff;
      padding: 10px;
      border: 1px solid #b3d1ff;
      margin-top: 10px;
    }

    .button {
      margin-top: 10px;
      padding: 8px 16px;
      background-color: #0066cc;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .button:hover {
      background-color: #004d99;
    }

    .small-input {
      width: 200px;
    }

    .sku-row {
      display: flex;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sku-row input {
      flex: 1;
    }

    #sku-list {
      margin-bottom: 15px;
    }

    .subsection {
      font-weight: bold;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <h2>Calculator GMV TikTok (v3)</h2>

  <div id="sku-list">
    <div class="subsection">SKU Input:</div>
    <div class="sku-row">
      <input type="text" placeholder="SKU Name">
      <input type="number" placeholder="COGS (RM)">
      <input type="number" placeholder="Unit Sold">
    </div>
  </div>
  <button class="button" onclick="addSKU()">+ Tambah SKU</button>

  <div class="section">
    <div class="subsection">Input Lain</div>
    <input type="number" class="small-input" id="gmv" placeholder="GMV/Order Amount SKU (RM)">
    <input type="number" class="small-input" id="subtotal" placeholder="Subtotal Selepas Diskaun (RM)">
    <input type="number" class="small-input" id="refund" placeholder="Cancelled/Refund (RM)">
    <input type="number" class="small-input" id="shipping" placeholder="Shipping Fee Selepas Diskaun (RM)">
    <input type="number" class="small-input" id="ads" placeholder="Ads Cost (RM)">
    <input type="number" class="small-input" id="affiliate" placeholder="Affiliate Fee (RM)">
  </div>

  <button class="button" onclick="kira()">Kira</button>

  <div class="section result-box" id="result">
    <div><strong>Total COGS:</strong> RM 0.00</div>
    <div><strong>Net GMV:</strong> RM 0.00</div>
    <div><strong>Transaction Fee (3.78%):</strong> RM 0.00</div>
    <div><strong>Commission Fee (7.56%):</strong> RM 0.00</div>
    <div><strong>Service Fee (4.32%):</strong> RM 0.00</div>
    <div><strong>Profit/Loss:</strong> RM 0.00</div>
  </div>

  <script>
    function addSKU() {
      const container = document.getElementById("sku-list");
      const row = document.createElement("div");
      row.className = "sku-row";
      row.innerHTML = `
        <input type="text" placeholder="SKU Name">
        <input type="number" placeholder="COGS (RM)">
        <input type="number" placeholder="Unit Sold">
      `;
      container.appendChild(row);
    }

    function kira() {
      const rows = document.querySelectorAll("#sku-list .sku-row");
      let totalCOGS = 0;

      rows.forEach(row => {
        const inputs = row.querySelectorAll("input");
        const cogs = parseFloat(inputs[1].value) || 0;
        const sold = parseFloat(inputs[2].value) || 0;
        totalCOGS += cogs * sold;
      });

      const gmv = parseFloat(document.getElementById("gmv").value) || 0;
      const subtotal = parseFloat(document.getElementById("subtotal").value) || 0;
      const refund = parseFloat(document.getElementById("refund").value) || 0;
      const shipping = parseFloat(document.getElementById("shipping").value) || 0;
      const ads = parseFloat(document.getElementById("ads").value) || 0;
      const affiliate = parseFloat(document.getElementById("affiliate").value) || 0;

      const netGMV = gmv + subtotal + refund;

      const feeTxn = netGMV * 0.0378;
      const feeComm = subtotal * 0.0756;
      const feeServ = subtotal * 0.0432;

      const profit = netGMV - totalCOGS - feeTxn - feeComm - feeServ - ads - affiliate;

      document.getElementById("result").innerHTML = `
        <div><strong>Total COGS:</strong> RM ${totalCOGS.toFixed(2)}</div>
        <div><strong>Net GMV:</strong> RM ${netGMV.toFixed(2)}</div>
        <div><strong>Transaction Fee (3.78%):</strong> RM ${feeTxn.toFixed(2)}</div>
        <div><strong>Commission Fee (7.56%):</strong> RM ${feeComm.toFixed(2)}</div>
        <div><strong>Service Fee (4.32%):</strong> RM ${feeServ.toFixed(2)}</div>
        <div><strong>Profit/Loss:</strong> RM ${profit.toFixed(2)}</div>
      `;
    }
  </script>
</body>
</html>
